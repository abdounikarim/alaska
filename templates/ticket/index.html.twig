{% extends 'base.html.twig' %}

{% block title %}Liste des billets{% endblock %}

{% block body %}
    <div class="container-fluid">
    <i class="far fa-snowflake fa-2x"></i>
    <h1>Billet simple pour l'Alaska</h1>
    </div>


    <div class="container">
    <p>Jean Forteroche</p>
    {% if is_granted('ROLE_ADMIN') %}
        <a href="{{ path('ticket_new') }}">Ajouter un billet</a>
    {% endif %}
    <h2>Liste des billets</h2>
    {% for ticket in tickets %}
            <h3>{{ ticket.id }}. {{ ticket.title }}</h3>
            <p>{{ ticket.author }}</p>
            <p><img src="{{ asset('images/' ~ ticket.image) }}" alt="{{ ticket.alt }}"></p>
            <p>{{ ticket.content|slice(0, 300)|raw }}... <a href="{{ path('ticket_show', {'id': ticket.id}) }}">Lire la suite</a></p>
            <span>Publié le {{ ticket.createdAt ? ticket.createdAt|date('d/m/Y H:i:s') : '' }}</span>
            <span>Mis à jour le {{ ticket.updatedAt ? ticket.updatedAt|date('d/m/Y H:i:s') : '' }}</span>
            {% if(ticket.nbComments > 0) %}
                <span>{{ ticket.nbComments }} Commentaires</span>
            {% else %}
                <span>{{ ticket.nbComments }} Commentaire</span>
            {% endif %}
            {% if is_granted('ROLE_ADMIN') %}
            <p>
                <a href="{{ path('ticket_edit', {'id': ticket.id}) }}">Modifier le billet</a>
            </p>
            {% endif %}
        {% else %}
            <div class="alert alert-warning" role="alert">
                Aucun billet pour le moment
            </div>
        {% endfor %}
    </div>
{% endblock %}